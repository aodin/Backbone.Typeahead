(()=>{(function(s,i,h){"use strict";var n=function(e,t){if(i.isArray(e))e=e.slice(0),i.isObject(t)||(t={});else if(i.isObject(e))t=e;else throw new Error("A typeahead must be created with either initial models or have its collection specified in an options object");this.preInitialize.call(this,e,t),s.View.call(this,t),this.postInitialize.call(this)};n.VERSION="2.0.0",n.extend=s.View.extend,n.ItemView=s.View.extend({tagName:"li",className:"dropdown-item",events:{click:"selectItem",mouseover:"activateItem"},initialize:function(e){this.parent=e.parent},render:function(){return this.$el.html(i.template(this.template)(this.model.toJSON())),this},selectItem:function(){this.parent.selectModel(this.model)},activateItem:function(){this.parent.activateModel(this.model)}}),i.extend(n.prototype,s.View.prototype,{preInitialize:function(e,t){t.key=t.key||"name",t.limit=t.limit||8,i.isUndefined(t.collection)&&i.isArray(e)&&(t.collection=new s.Collection(e,t)),this.view=t.view,i.isUndefined(this.view)&&(this.view=n.ItemView.extend({template:t.itemTemplate||`<a><%- ${t.key} %></a>`})),this.events=i.extend({},this.nativeEvents,i.result(this,"events")),this.options=t},postInitialize:function(){this.results=[],this.focused=!1,this.shown=!1,this.mousedover=!1},template:'<input type="text" class="form-control" placeholder="Search" /><ul class="dropdown-menu"></ul>',nativeEvents:{keyup:"keyup",keypress:"keypress",keydown:"keydown","blur input":"blur","focus input":"focus",mouseenter:"mouseenter",mouseleave:"mouseleave"},render:function(){return this.$el.html(this.template),this.$menu=this.$("ul"),this.$input=this.$("input"),this},rerender:function(e){this.$menu.empty(),i.each(e,this.renderModel,this),e.length?this.show():this.hide()},renderModel:function(e){this.$menu.append(new this.view({model:e,parent:this}).render().el)},search:function(e){var t=e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),r=new RegExp(t,"i"),a=this.options.key;return this.collection.filter(function(u){return r.test(u.get(a))})},clearInput:function(){this.$input.val("")},searchInput:function(){this.results=this.search(this.$input.val()).slice(0,this.options.limit),this.rerender(this.results)},select:function(){var e=this.$menu.find(".active").index();this.selectModel(this.results[e])},selectModel:function(e){this.$input.val(e.get(this.options.key)),this.hide(),this.trigger("selected",e,this.collection),this.results=[]},activateModel:function(){this.$menu.find(".active").removeClass("active")},keyup:function(e){switch(e.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.searchInput()}e.stopPropagation(),e.preventDefault()},focus:function(){this.focused=!0,this.shown||this.show()},blur:function(){this.focused=!1,!this.mousedover&&this.shown&&this.hide()},mouseenter:function(){this.mousedover=!0},mouseleave:function(){this.mousedover=!1,!this.focused&&this.shown&&this.hide()},keydown:function(e){this.suppressKeyPressRepeat=~h.inArray(e.keyCode,[40,38,9,13,27]),this.move(e)},keypress:function(e){this.suppressKeyPressRepeat||this.move(e)},move:function(e){if(this.shown){switch(e.keyCode){case 9:case 13:case 27:e.preventDefault();break;case 38:e.preventDefault(),this.prevItem();break;case 40:e.preventDefault(),this.nextItem();break}e.stopPropagation()}},prevItem:function(){var e=this.$menu.find(".active").removeClass("active"),t=e.prev();t.length||(t=this.$menu.find("li").last()),t.addClass("active")},nextItem:function(){var e=this.$menu.find(".active").removeClass("active"),t=e.next();t.length||(t=this.$menu.find("li").first()),t.addClass("active")},show:function(){if(this.results.length){var e=h.extend({},this.$input.position(),{height:this.$input[0].offsetHeight});return this.$menu.css({top:e.top+e.height,left:e.left}).show(),this.shown=!0,this}},hide:function(){return this.$menu.hide(),this.shown=!1,this}}),s.Typeahead=n})(Backbone,_,$);})();
//# sourceMappingURL=backbone.typeahead.min.js.map
