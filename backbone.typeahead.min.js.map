{
  "version": 3,
  "sources": ["backbone.typeahead.js"],
  "sourcesContent": ["(function (Backbone, _, $) {\n  \"use strict\";\n\n  var Typeahead = function (models, options) {\n    // The first parameter 'model' is an optional parameter\n    // If given an array, a copy will be made and passed to preInitialize\n    if (_.isArray(models)) {\n      // It is copied to prevent overwrite\n      models = models.slice(0);\n      if (!_.isObject(options)) {\n        options = {};\n      }\n    } else if (_.isObject(models)) {\n      options = models;\n    } else {\n      throw new Error(\n        \"A typeahead must be created with either initial models or have its collection specified in an options object\"\n      );\n    }\n\n    // Initialize\n    this.preInitialize.call(this, models, options);\n    Backbone.View.call(this, options);\n    this.postInitialize.call(this);\n  };\n\n  Typeahead.VERSION = \"2.0.0\";\n  Typeahead.extend = Backbone.View.extend;\n\n  Typeahead.ItemView = Backbone.View.extend({\n    tagName: \"li\",\n    className: \"dropdown-item\",\n    events: {\n      click: \"selectItem\",\n      mouseover: \"activateItem\",\n    },\n    initialize: function (options) {\n      // A reference to the parent view (aka the Typeahead) is required\n      this.parent = options.parent;\n    },\n    render: function () {\n      this.$el.html(_.template(this.template)(this.model.toJSON()));\n      return this;\n    },\n    selectItem: function () {\n      this.parent.selectModel(this.model);\n    },\n    activateItem: function () {\n      this.parent.activateModel(this.model);\n    },\n  });\n\n  _.extend(Typeahead.prototype, Backbone.View.prototype, {\n    // Pre-initialization should set up the collection type (remote / local)\n    preInitialize: function (models, options) {\n      // Set defaults\n      options.key = options.key || \"name\";\n      options.limit = options.limit || 8;\n\n      if (_.isUndefined(options.collection) && _.isArray(models)) {\n        options.collection = new Backbone.Collection(models, options);\n      }\n\n      // Build a item view if one was not provided\n      this.view = options.view;\n\n      if (_.isUndefined(this.view)) {\n        this.view = Typeahead.ItemView.extend({\n          // Dynamically construct a template with the key\n          template: options.itemTemplate || `<a><%- ${options.key} %></a>`,\n        });\n      }\n\n      // Attach native events, deferring to custom events\n      this.events = _.extend({}, this.nativeEvents, _.result(this, \"events\"));\n\n      // Backbone 1.1 no longer binds options to this by default\n      this.options = options;\n    },\n    // Models were emptied by the preInitialization function\n    // The parent Backbone.View constructor function has finished\n    // Options have already been parsed by _context()\n    postInitialize: function () {\n      this.results = []; // Save matched results as an array of Backbone Models\n\n      // Boolean toggles\n      this.focused = false; // Is the input in focus?\n      this.shown = false; // Is the menu shown?\n      this.mousedover = false; // Is the mouse over the typeahead (incl. menu)?\n    },\n    template:\n      '<input type=\"text\" class=\"form-control\" placeholder=\"Search\" /><ul class=\"dropdown-menu\"></ul>',\n    nativeEvents: {\n      keyup: \"keyup\",\n      keypress: \"keypress\",\n      keydown: \"keydown\",\n      \"blur input\": \"blur\",\n      \"focus input\": \"focus\",\n      mouseenter: \"mouseenter\",\n      mouseleave: \"mouseleave\",\n    },\n    // The render function should be overwritten on extended typeaheads\n    render: function () {\n      this.$el.html(this.template);\n      this.$menu = this.$(\"ul\");\n      this.$input = this.$(\"input\");\n      return this;\n    },\n    // Called by searchInput and whenever models change\n    rerender: function (models) {\n      this.$menu.empty();\n      _.each(models, this.renderModel, this);\n      models.length ? this.show() : this.hide();\n    },\n    renderModel: function (model) {\n      this.$menu.append(\n        new this.view({ model: model, parent: this }).render().el\n      );\n    },\n    // Return the models with a key that matches a portion of the given value\n    search: function (value) {\n      // Sanitize the input before performing regex search.\n      var sanitizedValue = value.replace(/[-\\/\\\\^$*+?.()|[\\]{}]/g, \"\\\\$&\");\n      // Use a regex to quickly perform a case-insensitive match\n      var re = new RegExp(sanitizedValue, \"i\");\n      var key = this.options.key;\n      return this.collection.filter(function (model) {\n        return re.test(model.get(key));\n      });\n    },\n    // Convenience method for clearing the search input\n    clearInput: function () {\n      this.$input.val(\"\");\n    },\n    // Pull the value from the search input and re-render the matched models\n    searchInput: function () {\n      this.results = this.search(this.$input.val()).slice(\n        0,\n        this.options.limit\n      );\n      this.rerender(this.results);\n    },\n    select: function () {\n      var index = this.$menu.find(\".active\").index();\n      this.selectModel(this.results[index]);\n    },\n    selectModel: function (model) {\n      // Update the input field with the key attribute of the select model\n      this.$input.val(model.get(this.options.key));\n      this.hide(); // Hide the menu\n      this.trigger(\"selected\", model, this.collection);\n      this.results = []; // Empty the results\n    },\n    activateModel: function () {\n      this.$menu.find(\".active\").removeClass(\"active\");\n    },\n    // Misc. events\n    keyup: function (evt) {\n      switch (evt.keyCode) {\n        case 40: // Down arrow\n        case 38: // Up arrow\n        case 16: // Shift\n        case 17: // Ctrl\n        case 18: // Alt\n          break;\n        // case 9: // Tab - disabled to prevent rogue select on tabbed focus\n        case 13: // Enter\n          if (!this.shown) {\n            return;\n          }\n          this.select();\n          break;\n        case 27: // Escape\n          if (!this.shown) {\n            return;\n          }\n          this.hide();\n          break;\n        default:\n          this.searchInput();\n      }\n      evt.stopPropagation();\n      evt.preventDefault();\n    },\n    // Menu state\n    focus: function () {\n      this.focused = true;\n      if (!this.shown) {\n        this.show();\n      }\n    },\n    blur: function () {\n      this.focused = false;\n      if (!this.mousedover && this.shown) {\n        this.hide();\n      }\n    },\n    mouseenter: function () {\n      this.mousedover = true;\n    },\n    mouseleave: function () {\n      this.mousedover = false;\n      if (!this.focused && this.shown) {\n        this.hide();\n      }\n    },\n    // Allow the user to change their selection with the keyboard\n    keydown: function (evt) {\n      this.suppressKeyPressRepeat = ~$.inArray(\n        evt.keyCode,\n        [40, 38, 9, 13, 27]\n      );\n      this.move(evt);\n    },\n    keypress: function (evt) {\n      // The suppressKeyPressRepeat check exists because keydown and keypress\n      // may fire for the same event\n      if (this.suppressKeyPressRepeat) {\n        return;\n      }\n      this.move(evt);\n    },\n    move: function (evt) {\n      if (!this.shown) {\n        return;\n      }\n      switch (evt.keyCode) {\n        case 9: // Tab\n        case 13: // Enter\n        case 27: // Escape\n          evt.preventDefault();\n          break;\n        case 38: // Up arrow\n          evt.preventDefault();\n          this.prevItem();\n          break;\n        case 40: // Down arrow\n          evt.preventDefault();\n          this.nextItem();\n          break;\n      }\n      evt.stopPropagation();\n    },\n    prevItem: function () {\n      var active = this.$menu.find(\".active\").removeClass(\"active\");\n      var prev = active.prev();\n      if (!prev.length) {\n        prev = this.$menu.find(\"li\").last();\n      }\n      prev.addClass(\"active\");\n    },\n    nextItem: function () {\n      var active = this.$menu.find(\".active\").removeClass(\"active\");\n      var next = active.next();\n      if (!next.length) {\n        next = this.$menu.find(\"li\").first();\n      }\n      next.addClass(\"active\");\n    },\n    // Show or hide the menu depending on the typeahead's state\n    show: function () {\n      // Do not show if there are no results\n      if (!this.results.length) {\n        return;\n      }\n      var pos = $.extend(\n        {},\n        this.$input.position(),\n        // Calling the [0] index returns the vanilla HTML object\n        { height: this.$input[0].offsetHeight }\n      );\n      this.$menu\n        .css({\n          top: pos.top + pos.height,\n          left: pos.left,\n        })\n        .show();\n      this.shown = true;\n      return this;\n    },\n    hide: function () {\n      this.$menu.hide();\n      this.shown = false;\n      return this;\n    },\n  });\n\n  Backbone.Typeahead = Typeahead;\n})(Backbone, _, $);\n"],
  "mappings": "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",
  "names": ["Backbone", "_", "$", "Typeahead", "models", "options", "model", "value", "sanitizedValue", "re", "key", "index", "evt", "active", "prev", "next", "pos"]
}
